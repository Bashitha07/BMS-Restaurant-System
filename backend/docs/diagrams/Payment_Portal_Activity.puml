@startuml Payment_Portal_Activity
!theme plain
title BMS Restaurant-System - Payment Portal Activity Diagram

start

:Customer initiates payment;
:Select payment method;

if (Payment Method?) then (Cash Deposit)
    :Show bank account details;
    :Generate reference number;
    :Display deposit instructions;
    :Customer makes bank transfer;
    :Upload deposit slip image;
    :Enter transaction details;
    :Submit for verification;

    :Admin reviews deposit;
    :Verify slip image;
    :Check transaction details;
    if (Valid deposit?) then (yes)
        :Approve payment;
        :Update order status;
        :Send confirmation;
        :Save payment record;
        stop
    else (no)
        :Request additional information;
        :Customer provides details;
        note right: Loop until approved
        :Re-review deposit;
    endif

elseif (Cash on Delivery)
    :Confirm cash payment option;
    :Calculate exact amount;
    :Show cash collection instructions;
    :Order proceeds to preparation;
    
    :Driver delivers order;
    :Collect exact cash amount;
    
    note right: Payment collected by driver upon delivery
    
    :Count and verify payment;
    if (Correct amount?) then (yes)
        :Provide receipt;
        :Mark payment complete;
        :Update order status;
        :Record cash collection;
        stop
    else (no)
        :Handle shortage/overpayment;
        :Adjust payment;
        :Provide receipt;
        :Update order status;
        :Complete transaction;
        stop
    endif

endif

:Payment process complete;
:Return to order confirmation;

stop

@enduml